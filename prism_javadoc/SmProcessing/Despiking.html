<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_212) on Wed Aug 12 09:18:05 PDT 2020 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Despiking (PRISM javadoc)</title>
<meta name="date" content="2020-08-12">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Despiking (PRISM javadoc)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Despiking.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../SmProcessing/Decimation.html" title="class in SmProcessing"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../SmProcessing/EventOnsetCoefs.html" title="class in SmProcessing"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?SmProcessing/Despiking.html" target="_top">Frames</a></li>
<li><a href="Despiking.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">SmProcessing</div>
<h2 title="Class Despiking" class="title">Class Despiking</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>SmProcessing.Despiking</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">Despiking</span>
extends java.lang.Object</pre>
<div class="block">DESPIKING DISCRETE-TIME SIGNAL USING HISTOGRAM METHOD
 
   Time series may contain undesired transients and spikes. This function
  replaces sudden spike(s) exceeding the threshold value by interpolating
  among previous and subsequent data points. The threshold is defined as
  the mean +/- a number of standard deviations of windowed data centered at
  the spike location(s). 
 
 Caveat: This function is for detecting sudden spikes and may not be effective
 for detection of long duration spike-like pulses.
 
 Original algorithm:    Written by Dr. Erol Kalkan, P.E. (ekalkan@usgs.gov)
 Matlab implementation: $Revision: 2.0 $  $Date: 2018/12/10 08:58:00 $</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#Despiking-int-">Despiking</a></span>(int&nbsp;numstandarddev)</code>
<div class="block">Despiking constructor takes the number of standard deviations above the mean
 to be used for defining spikes.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../SmConstants/VFileConstants.SpikeInterpolationMethod.html" title="enum in SmConstants">VFileConstants.SpikeInterpolationMethod</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#getMethod--">getMethod</a></span>()</code>
<div class="block">Getter for the interpolation method used during spike removal
 (currently only linear)</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#getNeighbors--">getNeighbors</a></span>()</code>
<div class="block">Getter for the neighborhood to use for interpolating (or getting mean of)
 replacement points for a spike</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#getNumBins--">getNumBins</a></span>()</code>
<div class="block">Getter for the number of bins used in the histogram</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#getNumPasses--">getNumPasses</a></span>()</code>
<div class="block">Getter for the number of passes through the array to use in order to look
 for all spikes</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#getNumStd--">getNumStd</a></span>()</code>
<div class="block">Getter for the number of standard deviations used from the mean to 
 determine if a spike should be fixed</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#getSpikeIndex--">getSpikeIndex</a></span>()</code>
<div class="block">Getter for the number of spikes found after all passes</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#getWindowSize--">getWindowSize</a></span>()</code>
<div class="block">Getter for the window size to use for upper bound for neighborhood</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#removeSpikes-double:A-double-">removeSpikes</a></span>(double[]&nbsp;array,
            double&nbsp;dt)</code>
<div class="block">Looks for possible spikes in the input array by differentiating the array
 and making a histogram of the magnitudes (absolute values).</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#setNeighbors-int-">setNeighbors</a></span>(int&nbsp;newnum)</code>
<div class="block">Provides the ability to adjust the size of the neighborhood used to determine
 replacement value for spike</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#setNumBins-int-">setNumBins</a></span>(int&nbsp;newnum)</code>
<div class="block">Provides ability to set a different number of bins for the histogram</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#setNumPasses-int-">setNumPasses</a></span>(int&nbsp;newnum)</code>
<div class="block">Provides the ability to adjust the number of passes through the despiking
 algorithm</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#setNumStd-int-">setNumStd</a></span>(int&nbsp;newnum)</code>
<div class="block">Provides the ability to adjust the number of standard deviations used
 when determining what is a spike</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#setWindowSize-int-">setWindowSize</a></span>(int&nbsp;newnum)</code>
<div class="block">Provides the ability to adjust the window size as an upper bound on the
 neighborhood</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/Despiking.html#spikeFix-double:A-int-int-int-">spikeFix</a></span>(double[]&nbsp;inarr,
        int&nbsp;idx,
        int&nbsp;nbors,
        int&nbsp;wsize)</code>
<div class="block">Does the actual spike check and removal.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Despiking-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Despiking</h4>
<pre>public&nbsp;Despiking(int&nbsp;numstandarddev)</pre>
<div class="block">Despiking constructor takes the number of standard deviations above the mean
 to be used for defining spikes.  This mean is determined in a window of
 values around the possible spike.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>numstandarddev</code> - number of standard deviations</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="removeSpikes-double:A-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeSpikes</h4>
<pre>public&nbsp;boolean&nbsp;removeSpikes(double[]&nbsp;array,
                            double&nbsp;dt)</pre>
<div class="block">Looks for possible spikes in the input array by differentiating the array
 and making a histogram of the magnitudes (absolute values).  Any spike above the
 midpoint of the topmost bin is examined to look for spikes.  Multiple passes
 can be made through the spike-corrected array to look for more spikes.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>array</code> - input array for spike removal.  This array is modified</dd>
<dd><code>dt</code> - delta time for the sampling rate in seconds</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if any spikes were found</dd>
</dl>
</li>
</ul>
<a name="spikeFix-double:A-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>spikeFix</h4>
<pre>public&nbsp;int&nbsp;spikeFix(double[]&nbsp;inarr,
                    int&nbsp;idx,
                    int&nbsp;nbors,
                    int&nbsp;wsize)</pre>
<div class="block">Does the actual spike check and removal. Takes the input array and the index
 of the possible spike and examines its magnitude compared to its neighbors
 within a window.  If a spike is detected it is replaced with a linearly
 interpolated value.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>inarr</code> - input array for spike removal - this array is modified</dd>
<dd><code>idx</code> - index in input array of possible spike</dd>
<dd><code>nbors</code> - number of neighbors on each side to use for interpolation</dd>
<dd><code>wsize</code> - size of window around spike to use for mean, stddev calculation</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>1 if spike found, 0 if not</dd>
</dl>
</li>
</ul>
<a name="setNumBins-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNumBins</h4>
<pre>public&nbsp;void&nbsp;setNumBins(int&nbsp;newnum)</pre>
<div class="block">Provides ability to set a different number of bins for the histogram</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newnum</code> - new number of bins</dd>
</dl>
</li>
</ul>
<a name="setNumStd-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNumStd</h4>
<pre>public&nbsp;void&nbsp;setNumStd(int&nbsp;newnum)</pre>
<div class="block">Provides the ability to adjust the number of standard deviations used
 when determining what is a spike</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newnum</code> - number of standard deviations</dd>
</dl>
</li>
</ul>
<a name="setNumPasses-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNumPasses</h4>
<pre>public&nbsp;void&nbsp;setNumPasses(int&nbsp;newnum)</pre>
<div class="block">Provides the ability to adjust the number of passes through the despiking
 algorithm</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newnum</code> - number of passes</dd>
</dl>
</li>
</ul>
<a name="setWindowSize-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setWindowSize</h4>
<pre>public&nbsp;void&nbsp;setWindowSize(int&nbsp;newnum)</pre>
<div class="block">Provides the ability to adjust the window size as an upper bound on the
 neighborhood</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newnum</code> - window size</dd>
</dl>
</li>
</ul>
<a name="setNeighbors-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNeighbors</h4>
<pre>public&nbsp;void&nbsp;setNeighbors(int&nbsp;newnum)</pre>
<div class="block">Provides the ability to adjust the size of the neighborhood used to determine
 replacement value for spike</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newnum</code> - neighborhood size</dd>
</dl>
</li>
</ul>
<a name="getNumBins--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumBins</h4>
<pre>public&nbsp;int&nbsp;getNumBins()</pre>
<div class="block">Getter for the number of bins used in the histogram</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of histogram bins</dd>
</dl>
</li>
</ul>
<a name="getNumStd--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumStd</h4>
<pre>public&nbsp;int&nbsp;getNumStd()</pre>
<div class="block">Getter for the number of standard deviations used from the mean to 
 determine if a spike should be fixed</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of standard deviations</dd>
</dl>
</li>
</ul>
<a name="getNumPasses--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumPasses</h4>
<pre>public&nbsp;int&nbsp;getNumPasses()</pre>
<div class="block">Getter for the number of passes through the array to use in order to look
 for all spikes</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of passes through spike removal</dd>
</dl>
</li>
</ul>
<a name="getWindowSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWindowSize</h4>
<pre>public&nbsp;int&nbsp;getWindowSize()</pre>
<div class="block">Getter for the window size to use for upper bound for neighborhood</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the window size</dd>
</dl>
</li>
</ul>
<a name="getNeighbors--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNeighbors</h4>
<pre>public&nbsp;int&nbsp;getNeighbors()</pre>
<div class="block">Getter for the neighborhood to use for interpolating (or getting mean of)
 replacement points for a spike</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the neighborhood size</dd>
</dl>
</li>
</ul>
<a name="getMethod--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMethod</h4>
<pre>public&nbsp;<a href="../SmConstants/VFileConstants.SpikeInterpolationMethod.html" title="enum in SmConstants">VFileConstants.SpikeInterpolationMethod</a>&nbsp;getMethod()</pre>
<div class="block">Getter for the interpolation method used during spike removal
 (currently only linear)</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the interpolation method</dd>
</dl>
</li>
</ul>
<a name="getSpikeIndex--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getSpikeIndex</h4>
<pre>public&nbsp;int&nbsp;getSpikeIndex()</pre>
<div class="block">Getter for the number of spikes found after all passes</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of spike found</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Despiking.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../SmProcessing/Decimation.html" title="class in SmProcessing"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../SmProcessing/EventOnsetCoefs.html" title="class in SmProcessing"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?SmProcessing/Despiking.html" target="_top">Frames</a></li>
<li><a href="Despiking.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
