<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_212) on Tue Nov 12 13:26:26 PST 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ButterworthFilter (PRISM javadoc)</title>
<meta name="date" content="2019-11-12">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ButterworthFilter (PRISM javadoc)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ButterworthFilter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../SmProcessing/ArrayStats.html" title="class in SmProcessing"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../SmProcessing/ComputedParams.html" title="class in SmProcessing"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?SmProcessing/ButterworthFilter.html" target="_top">Frames</a></li>
<li><a href="ButterworthFilter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">SmProcessing</div>
<h2 title="Class ButterworthFilter" class="title">Class ButterworthFilter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>SmProcessing.ButterworthFilter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">ButterworthFilter</span>
extends java.lang.Object</pre>
<div class="block"><p>function bandpass (s, nd, f1, f2, delt, nroll, icaus)</p>

  <p>function bandpass implements a butterworth bandpass filter</p>

  <p>s[] = input time series array of doubles </p>
 
  nd = the number of points in the time series, which is less than the length of s (see below) 
  f1 = the lower cutoff frequency 
  f2 = the higher cutoff frequency
  delt = the timestep
  nroll = butterworth bandpass filter order is 2*nroll (max val nroll=8)
  icaus = causal, acausal filter flag, icaus = 1 for causal filter
  <p>
  The dimension of the input array s must be at least as large
  as the larger of the following (if acausal filtering):
  (nd + (3 * nroll)/(f1 * delt))  or  (nd + (6 * nroll)/((f2 - f1) * delt))
  </p><p>
  All floating point operations are of type double
  In any operation with integer and double, integer is converted to double
 </p><p>
  From the Fortran BAND.FOR, TSPP--A Collection of FORTRAN Programs for Processing
                               and Manipulating Time Series
  Butterworth bandpass filter order 2*nroll (nroll.le.8) (see Kanasewich, 
    Time Sequence Analysis in Geophysics, Third Edition, 
    University of Alberta Press, 1981)</p>
  written by W.B. Joyner 01/07/97
 Dates: xx/xx/xx - Written by Bill Joyner
        09/12/00 - Changed "n" to "nroll" to eliminate confusion with
                   Kanesewich, who uses "n" as the order (=2*nroll), and
                   cleaned up appearance of code by using spaces, indents, etc.
        09/12/00 - double precision statements added so that the output
                   series has sufficient precision for double integration.
        11/08/00 - Increased dimension of s from 50000 to 100000
        02/14/01 - Modified/corrected real numbers function calls to 
                   double precision - cds
        02/22/01 - Removed dimension of s (it is up to the user to specify
                   it properly)</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../SmProcessing/ButterworthFilter.html#ButterworthFilter--">ButterworthFilter</a></span>()</code>
<div class="block">Default constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/ButterworthFilter.html#applyFilter-double:A-double-int-">applyFilter</a></span>(double[]&nbsp;arrayS,
           double&nbsp;taplengthtime,
           int&nbsp;eventOnsetIndex)</code>
<div class="block">This method does the actual filtering of the input array.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/ButterworthFilter.html#calculateCoefficients-double-double-double-int-boolean-">calculateCoefficients</a></span>(double&nbsp;lowCutOff,
                     double&nbsp;highCutOff,
                     double&nbsp;dtime,
                     int&nbsp;rolloff,
                     boolean&nbsp;acausal)</code>
<div class="block">This method calculates the filter coefficients based on the corner frequencies,
 the sample time interval, and the roll off.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/ButterworthFilter.html#getB1--">getB1</a></span>()</code>
<div class="block">Getter for the first coefficient array</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/ButterworthFilter.html#getB2--">getB2</a></span>()</code>
<div class="block">Getter for the 2nd coefficient array</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/ButterworthFilter.html#getEndTaperlength--">getEndTaperlength</a></span>()</code>
<div class="block">Getter for the end taper length</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/ButterworthFilter.html#getFact--">getFact</a></span>()</code>
<div class="block">Getter for the array with the calculated gains</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/ButterworthFilter.html#getPadLength--">getPadLength</a></span>()</code>
<div class="block">Getter for the lengths of pads applied to front and back of array for
 acausal filtering</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../SmProcessing/ButterworthFilter.html#getTaperlength--">getTaperlength</a></span>()</code>
<div class="block">Getter for the calculated taper length</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ButterworthFilter--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ButterworthFilter</h4>
<pre>public&nbsp;ButterworthFilter()</pre>
<div class="block">Default constructor</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="calculateCoefficients-double-double-double-int-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateCoefficients</h4>
<pre>public&nbsp;boolean&nbsp;calculateCoefficients(double&nbsp;lowCutOff,
                                     double&nbsp;highCutOff,
                                     double&nbsp;dtime,
                                     int&nbsp;rolloff,
                                     boolean&nbsp;acausal)</pre>
<div class="block">This method calculates the filter coefficients based on the corner frequencies,
 the sample time interval, and the roll off.  A flag is also input to select
 the type of filtering, either causal or acausal.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lowCutOff</code> - the filter low cutoff frequency</dd>
<dd><code>highCutOff</code> - the filter high cutoff frequency</dd>
<dd><code>dtime</code> - the sample time interval for the record</dd>
<dd><code>rolloff</code> - the filter roll off, which is 1/2 the filter order</dd>
<dd><code>acausal</code> - flag indicating causal or acausal filtering</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true or false flag indicating successful calculation of filter
 coefficients (based on valid input parameters)</dd>
</dl>
</li>
</ul>
<a name="applyFilter-double:A-double-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>applyFilter</h4>
<pre>public&nbsp;double[]&nbsp;applyFilter(double[]&nbsp;arrayS,
                            double&nbsp;taplengthtime,
                            int&nbsp;eventOnsetIndex)</pre>
<div class="block">This method does the actual filtering of the input array.  If the input
 flag was set to acausal, the array is filtered forwards and backwards.  
 If it was set to causal, the filtering is only forwards.  Before filtering,
 if acausal, pads are added to the front and back of the array. The ends of
 the input array are tapered by a half-cosine taper (only acausal) in order to prevent
 ringing in the output waveform.  The taper length for the start of the array is calculated by finding
 the first zero crossing that occurs before the event onset.  This time
 becomes the taper length time, with exceptions.  The exceptions: if there's
 no zero crossing found before the event onset, or the calculated time
 is less than the value entered as taplengthtime.  For these exceptions,
 the input taper length value is used instead.  The taper length for the end
 of the array is the taper length input value from the configuration file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>arrayS</code> - the input array to filter, NOTE: this array is updated with
 the filtered version upon return</dd>
<dd><code>taplengthtime</code> - the length of time in seconds to apply the taper.  This
 value is used for the taper at the end of the array and only used for the
 taper at the start of the array if the calculated taper length is invalid or too short.</dd>
<dd><code>eventOnsetIndex</code> - the event onset index is used to refine the
 taper length</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an array containing the filtered result with the pads still included</dd>
</dl>
</li>
</ul>
<a name="getFact--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFact</h4>
<pre>public&nbsp;double[]&nbsp;getFact()</pre>
<div class="block">Getter for the array with the calculated gains</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the gains</dd>
</dl>
</li>
</ul>
<a name="getB1--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getB1</h4>
<pre>public&nbsp;double[]&nbsp;getB1()</pre>
<div class="block">Getter for the first coefficient array</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the first coefficient array</dd>
</dl>
</li>
</ul>
<a name="getB2--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getB2</h4>
<pre>public&nbsp;double[]&nbsp;getB2()</pre>
<div class="block">Getter for the 2nd coefficient array</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the second coefficient array</dd>
</dl>
</li>
</ul>
<a name="getPadLength--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPadLength</h4>
<pre>public&nbsp;int&nbsp;getPadLength()</pre>
<div class="block">Getter for the lengths of pads applied to front and back of array for
 acausal filtering</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the pad length</dd>
</dl>
</li>
</ul>
<a name="getTaperlength--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTaperlength</h4>
<pre>public&nbsp;double&nbsp;getTaperlength()</pre>
<div class="block">Getter for the calculated taper length</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the calculated taper length used in filtering</dd>
</dl>
</li>
</ul>
<a name="getEndTaperlength--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getEndTaperlength</h4>
<pre>public&nbsp;double&nbsp;getEndTaperlength()</pre>
<div class="block">Getter for the end taper length</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the end taper length used in filtering</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ButterworthFilter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../SmProcessing/ArrayStats.html" title="class in SmProcessing"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../SmProcessing/ComputedParams.html" title="class in SmProcessing"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?SmProcessing/ButterworthFilter.html" target="_top">Frames</a></li>
<li><a href="ButterworthFilter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
